<mat-card *ngIf="selectedUser">
  <mat-card-header>
    <mat-toolbar>
      <span>Chat with {{fromUser.name}} => <b>{{ selectedUser.name }}</b></span>
      <span class="spacer"></span>
      <button
        mat-button
        (click)="closeChat()"
      ><mat-icon>close</mat-icon> Close</button>
    </mat-toolbar>
  </mat-card-header>
  <mat-card-content>
    <div class="chat-window">
      <mat-card
        *ngFor="let message of messages()"
        class="message"
        [class.message-align-right]="message.from == fromUser.id"
        [class.message-align-left]="message.from != fromUser.id"
        appearance="outlined"
      >
        <mat-card-content>{{ message.text }}</mat-card-content>
      </mat-card>
    </div>
  </mat-card-content>
  <mat-card-actions>
    <mat-form-field style="flex: 1;">
      <mat-label>Type a message</mat-label>
      <input
        matInput
        [(ngModel)]="newMessage"
        (keydown.enter)="sendOutgoingMessageEvent()"
      >
    </mat-form-field>
    <button
      mat-button
      (click)="sendOutgoingMessageEvent()"
    >Send<mat-icon>
        send
      </mat-icon></button>
  </mat-card-actions>
</mat-card>
